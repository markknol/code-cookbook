<!DOCTYPE html> <html lang="en" id="page"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width"/> <title>Everything is an expression - Haxe Code Cookbook</title> <base href="./../.."/>  <link rel="stylesheet" type="text/css" href="http://haxe.org/css/bootstrap.min.css"/> <link rel="stylesheet" type="text/css" href="css/styles.min.css"/> <link rel="icon" href="http://haxe.org/favicon.ico"/>  <meta name="twitter:creator" content="@haxe_org"/>  <meta property="og:title" content="Everything is an expression - Haxe Code Cookbook"/> <meta property="og:type" content="article"/> <meta property="og:url" content="http://code.haxe.org/"/> <meta property="og:image" content="http://code.haxe.org/img/share.jpg"/> <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/> <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400" rel="stylesheet" type="text/css"/> </head><body><nav class="section nav dark"><div class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-inner"><button class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse" type="button"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="brand haxe-logo" href="http://haxe.org/"><img alt="Haxe" height="21" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'" src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107"/></a><a class="brand sub ide" href="./index.html">CODE</a><div class="nav-collapse collapse"><ul class="nav"> <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-book"></i> Browse <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="category/beginner/index.html">Beginner <small class="category-count">(3)</small></a></li><li><a href="category/macros/index.html">Macros <small class="category-count">(13)</small></a></li><li><a href="category/other/index.html">Other <small class="category-count">(5)</small></a></li><li><a href="category/abstract-types/index.html">Abstract types <small class="category-count">(3)</small></a></li><li><a href="category/design-patterns/index.html">Design-patterns <small class="category-count">(3)</small></a></li><li class="active"><a href="category/principles/index.html">Principles <small class="category-count">(3)</small></a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-tags"></i> Tags <b class="caret"></b></a><ul class="dropdown-menu"> <li><a href="tag/abstract-type.html"><i class="fa fa-tag"></i> abstract-type <small class="category-count">(3)</small></a></li>  <li><a href="tag/macro-function.html"><i class="fa fa-tag"></i> macro-function <small class="category-count">(7)</small></a></li> <li><a href="tag/iterator.html"><i class="fa fa-tag"></i> iterator <small class="category-count">(3)</small></a></li>   <li><a href="tag/enum.html"><i class="fa fa-tag"></i> enum <small class="category-count">(2)</small></a></li> <li><a href="tag/class.html"><i class="fa fa-tag"></i> class <small class="category-count">(3)</small></a></li>  <li><a href="tag/validation.html"><i class="fa fa-tag"></i> validation <small class="category-count">(3)</small></a></li>  <li><a href="tag/building-fields.html"><i class="fa fa-tag"></i> building-fields <small class="category-count">(6)</small></a></li>  <li><a href="tag/build-macro.html"><i class="fa fa-tag"></i> build-macro <small class="category-count">(6)</small></a></li>    </ul></li><li class="divider"></li> <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="/documentation/">Learn Haxe <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="http://haxe.org/documentation/">Introduction</a></li><li class="divider"></li><li><a href="http://haxe.org/manual/">Manual</a></li><li><a href="http://api.haxe.org">API Documentation</a></li><li class="divider"></li><li><a href="http://try.haxe.org">Try Haxe</a></li><li><a href="http://lib.haxe.org">Haxelib</a></li><li class="active"><a href="http://code.haxe.org">Code Cookbook</a></li></ul></li><li class=" dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Connect <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://github.com/HaxeFoundation"><i class="fa fa-github"></i> Github</a></li><li><a href="https://github.com/HaxeFoundation/haxe/issues"><i class="fa fa-github"></i> Bug reports</a></li><li><a href="http://stackoverflow.com/questions/tagged/haxe"><i class="fa fa-stack-exchange"></i> Stack Overflow</a></li><li><a href="http://groups.google.com/group/haxelang?hl=en"><i class="fa fa-envelope-o"></i> Google Groups</a></li><li><a href="http://webchat.freenode.net/?channels=haxe"><i class="fa fa-comments-o"></i> IRC</a></li><li><a href="http://haxe.org/blog"><i class="fa fa-rss"></i> Blog</a></li><li class="divider"></li><li><a href="https://plus.google.com/communities/103302587329918132234"><i class="fa fa-google-plus"></i> Google+</a></li><li><a href="https://www.facebook.com/haxe.org/"><i class="fa fa-facebook"></i> Facebook</a></li><li><a href="https://twitter.com/search?q=%23haxe"><i class="fa fa-twitter"></i> #haxe</a></li><li><a href="https://twitter.com/haxelang"><i class="fa fa-twitter"></i> @haxelang</a></li><li><a href="https://twitter.com/haxe_org"><i class="fa fa-twitter"></i> @haxe_org</a></li><li class="divider"></li><li><a href="http://haxe.org/foundation/contact.html">Contact</a></li></ul></li></ul></div></div></div></nav><div class="main-content"><header class="hero-unit-small"><div class="container"><div class="row"><h1>Haxe Code Cookbook</h1></div></div></header><main class="container"><section class="row"><nav class="span4 sidebar-toc" id="sidebar"><h3>Table of contents</h3><ul class="unstyled"><li><a href="category/beginner/index.html">Beginner</a><ul class="unstyled"><li><a href="category/beginner/declare-classes.html">Declare classes</a></li><li><a href="category/beginner/declare-functions.html">Declare functions</a></li><li><a href="category/beginner/hello-world.html">Hello world</a></li></ul></li><br/><li><a href="category/macros/index.html">Macros</a><ul class="unstyled"><li><a href="category/macros/add-git-commit-hash-in-build.html">Add git commit-hash in build</a></li><li><a href="category/macros/add-parameters-as-fields.html">Add parameters as fields</a></li><li><a href="category/macros/assert-with-values.html">Assert macro that shows sub-expression values</a></li><li><a href="category/macros/build-map.html">Add a map</a></li><li><a href="category/macros/build-property-with-inline-getter.html">Add property with getter</a></li><li><a href="category/macros/build-static-field.html">Add a static field</a></li><li><a href="category/macros/build-value-objects.html">Create value-objects</a></li><li><a href="category/macros/combine-objects.html">Combine two or more structures</a></li><li><a href="category/macros/completion-from-url.html">Code completion from URL</a></li><li><a href="category/macros/enum-abstract-values.html">Get all values of an @:enum abstract</a></li><li><a href="category/macros/extract-enum-value.html">Extract values from known enum instances</a></li><li><a href="category/macros/generate-dispatch-code.html">Generate dispatch code</a></li><li><a href="category/macros/validate-json.html">Validates a .JSON file compile-time</a></li></ul></li><br/><li><a href="category/other/index.html">Other</a><ul class="unstyled"><li><a href="category/other/grid-iterator.html">Grid iterator</a></li><li><a href="category/other/reverse-iterator.html">Reverse iterator</a></li><li><a href="category/other/sort-array.html">Sorting arrays</a></li><li><a href="category/other/step-iterator.html">Stepped iterator</a></li><li><a href="category/other/using-filesystem.html">Using File system</a></li></ul></li><br/><li><a href="category/abstract-types/index.html">Abstract types</a><ul class="unstyled"><li><a href="category/abstract-types/emailaddress.html">EmailAddress</a></li><li><a href="category/abstract-types/rounded float.html">Rounded Float</a></li><li><a href="category/abstract-types/tempeatures.html">Temperatures</a></li></ul></li><br/><li><a href="category/design-patterns/index.html">Design-patterns</a><ul class="unstyled"><li><a href="category/design-patterns/factory.html">Factory</a></li><li><a href="category/design-patterns/lazy-initialization.html">Lazy initialization</a></li><li><a href="category/design-patterns/singleton.html">Singleton</a></li></ul></li><br/><li><a href="category/principles/index.html">Principles</a><ul class="unstyled"><li><a href="category/principles/inheritance.html">Inheritance</a></li><li><a href="category/principles/null-safety.html">Null safety</a></li><li class="active"><a href="category/principles/everything-is-an-expression.html">Everything is an expression</a></li></ul></li><br/></ul></nav><article class="span8"><h1>Everything is an expression</h1> <p>Many programming languages split code into two kinds of elements: <em>statements</em> and <em>expressions</em>. Statements perform some action (e.g. <code>if/else</code>) and expressions return values (e.g. <code>a + b</code>).</p> <p>This is <strong>NOT</strong> the case in Haxe. In Haxe, everything is an expression which means it can be used where value is expected.</p> <h2>Examples</h2> <p><code>if/else</code> is an expression returning value of either <code>true</code> or <code>false</code> branch:</p> <pre><code class="prettyprint haxe">trace(if (Math.random() &gt; 0.5) "Hello" else "Bye");</code></pre> <p><code>try/catch</code> is an expression returning value of <code>try</code> if everything is okay or <code>catch</code> if error is caught:</p> <pre><code class="prettyprint haxe">trace(try haxe.Json.parse("{") catch (e:Dynamic) null);</code></pre> <p><code>switch</code> is an expression returning value of the matched <code>case</code> (or <code>default</code>):</p> <pre><code class="prettyprint haxe">trace(switch (Std.random(3)) {
  case 0: "zero";
  case 1: "one";
  case 2: "two";
  default: "impossible!";
});</code></pre> <p>Even blocks are just expressions, returning value of the last of their expressions:</p> <pre><code class="prettyprint haxe">trace({
  var l = new List();
  for (i in 0...10) l.add(i);
  l;
});</code></pre> <p>Actually, knowing that blocks are mere expressions, they are not necessarily required for e.g. functions so this is a perfectly valid function definition:</p> <pre><code class="prettyprint haxe">function toInt(s:String):Int return Std.parseInt(s);</code></pre> <p>Some expressions, such as loops or var declarations don't make any sense as values, so they will be typed as Void and thus won't be able to be used where value is expected. For example the following won't compile:</p> <pre><code class="prettyprint haxe">trace(for (i in 0...10) i); // ERROR: Cannot use Void as value</code></pre> <p>Some expressions such as <code>throw</code>, <code>continue</code> or <code>return</code> also don't make sense as values, however they are allowed to be in value places so code like the following is possible:</p> <pre><code class="prettyprint haxe">for (file in ["a.txt", "b.txt", "c.txt"]) {
  // try reading file or skip the loop iteration
  var content = try sys.io.File.getContent(file) catch (e:Dynamic) continue;
  trace(content);
}</code></pre> <p>One interesting feature of the <code>return</code> expression is that it can be used with a non-empty expression for returning out of <code>Void</code> functions. While it can be confusing at first, it is very pragmatic when dealing with callback-based code. This kind of expressions will be transformed from <code>return someVoid();</code> to <code>someVoid(); return;</code>. For example:</p> <pre><code class="prettyprint haxe">function getContent(fileName:String, callback:String-&gt;Void):Void {
  if (fileName == "")
    return callback("New file"); // invoke callback and return early if `fileName` is empty string
  
  var content =
    try
      sys.io.File.getContent(fileName)
    catch (e:Dynamic)
      return callback("ERROR: " + e); // invoke callback and return early in case of error

  callback(content.toUpperCase()); // invoke callback normally
}</code></pre> <blockquote> <p>Author: <a href="https://github.com/nadako">Dan Korostelev</a></p></blockquote><hr/><div class="contribution"><i class="fa fa-lightbulb-o"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/edit/master/./assets/content/cookbook/Principles/everything-is-an-expression.md">Suggest improvement</a> | <i class="fa fa-exclamation-circle"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/issues/new?title=[Everything is an expression]&body=%0A%0ASources:%0A*%20http://code.haxe.org/category/principles/everything-is-an-expression.html%0A*%20https://github.com/HaxeFoundation/code-cookbook/tree/master/./assets/content/cookbook/Principles/everything-is-an-expression.md">Report issue</a> |<i class="fa fa-plus-circle"></i> <a href="https://github.com/HaxeFoundation/code-cookbook/new/master/./assets/content/cookbook/Principles/snippet-name.md/?filename=snippet-name.md">Add new snippet</a></div></article></section></main></div><footer class="section dark site-footer"><div class="container"><div class="copyright"> <p>&copy;2016&nbsp;<a class="hf-link" href="http://haxe.org/foundation/" title="Haxe Foundation Website">Haxe Foundation</a> |&nbsp;<a href="https://github.com/HaxeFoundation/code-cookbook" title="Haxe Code Cookbook on Github">Code Cookbook on Github</a> </p></div></div></footer><link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css"/>  <link rel="stylesheet" type="text/css" href="css/haxe-nav.min.css"/><script src="http://haxe.org/js/jquery.min.js"></script><script src="http://haxe.org/js/bootstrap.min.js"></script><script src="js/highlighter.js"></script><script>  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');  ga('create', 'UA-74262827-2', 'auto');  ga('send', 'pageview');</script></body></html>